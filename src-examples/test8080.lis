Z80/8080-Macro-Assembler  Release 2.0

LOC   OBJECT CODE   LINE   STMT SOURCE CODE
                       1      1 ;***********************************************************************
                       2      2 ; MICROCOSM ASSOCIATES  8080/8085 CPU DIAGNOSTIC VERSION 1.0  (C) 1980
                       3      3 ;***********************************************************************
                       4      4 ;
                       5      5 ;DONATED TO THE "SIG/M" CP/M USER'S GROUP BY:
                       6      6 ;KELLY SMITH, MICROCOSM ASSOCIATES
                       7      7 ;3055 WACO AVENUE
                       8      8 ;SIMI VALLEY, CALIFORNIA, 93065
                       9      9 ;(805) 527-9321 (MODEM, CP/M-NET (TM))
                      10     10 ;(805) 527-0518 (VERBAL)
                      11     11 ;
                      12     12 ; 03-MAY-2024 Thomas Eberhardt  Add z80pack CPU switching
                      13     13 ; 18-MAY-2024 Thomas Eberhardt  Add bare emulator/machine support
                      14     14 ;
                      15     15 
                      16     16 	IFNDEF	ONCPM
                      17     17 ONCPM	EQU	1	;1 = RUNS ON CPM, 0 = BARE EMULATOR/MACHINE
                      18     18 	ENDIF
0001  =               19     19 IOCHAR	EQU	01H	;I/O PORT FOR CHARACTER OUTPUT (BARE)
                      20     20 
                      21     21 	IF	ONCPM
                      22     22 		ORG	00100H
                      23     23 	ELSE
                      24     24 		ORG	0H
                      25     25 	ENDIF
                      26     26 
0100  af              27     27 START:	XRA	A
0101  32 9c 01        28     28 		STA	SWFLAG		; CLEAR CPU SWITCHED FLAG
0104  3d              29     29 		DCR	A
0105  ea 15 01        30     30 		JPE	START1		; EVEN PARITY -> IS 8080
0108  cd 7b 01        31     31 		CALL	SW8080		; SWITCH TO 8080
010b  3e 0d           32     32 		MVI	A,0DH
010d  cd dd 01        33     33 		CALL	PCHAR
0110  3e 0a           34     34 		MVI	A,0AH
0112  cd dd 01        35     35 		CALL	PCHAR
                      36     36 
0115  21 1e 01        37     37 START1:	LXI		H, LOLZ
0118  cd d2 01        38     38 		CALL	MSG
011b  c3 41 02        39     39 		JMP		CPU	;JUMP TO 8080 CPU DIAGNOSTIC
                      40     40 ;
011e  4d 49 43 52     41     41 LOLZ:	DB	'MICROCOSM ASSOCIATES 8080/8085'
0122  4f 43 4f 53     41     42
0126  4d 20 41 53     41     43
012a  53 4f 43 49     41     44
012e  41 54 45 53     41     45
0132  20 38 30 38     41     46
0136  30 2f 38 30     41     47
013a  38 35           41     48
013c  20 43 50 55     42     49 	DB	' CPU DIAGNOSTIC VERSION 1.0  (C) 1980'
0140  20 44 49 41     42     50
0144  47 4e 4f 53     42     51
0148  54 49 43 20     42     52
014c  56 45 52 53     42     53
0150  49 4f 4e 20     42     54
0154  31 2e 30 20     42     55
0158  20 28 43 29     42     56
015c  20 31 39 38     42     57
0160  30              42     58
0161  0d 0a 24        43     59 	DB	0dh, 0ah, 24h
                      44     60 ;
0005  =               45     61 BDOS	EQU		00005H	;BDOS ENTRY TO CP/M
0164  3a 9c 01        46     62 WBOOT:	LDA	SWFLAG	; CHECK CPU SWITCHED FLAG
0167  b7              47     63 		ORA	A
0168  ca 78 01        48     64 		JZ	WBOOT1
016b  3e 0d           49     65 		MVI	A,0DH
016d  cd dd 01        50     66 		CALL	PCHAR
0170  3e 0a           51     67 		MVI	A,0AH
0172  cd dd 01        52     68 		CALL	PCHAR
0175  cd 83 01        53     69 		CALL	SWZ80	; SWITCH BACK TO Z80
0178                  54     70 WBOOT1:
                      55     71 	IF	ONCPM
0178  c3 00 00        56     72 		JMP	0
                      57     73 	ELSE
                      58     74 		MVI	A,0DH
                      59     75 		CALL	PCHAR
                      60     76 		MVI	A,0AH
                      61     77 		CALL	PCHAR
                      62     78 		DI
                      63     79 		HLT
                      64     80 	ENDIF
                      65     81 
                      66     82 ;
                      67     83 ;Z80PACK CPU SWITCHING ROUTINE
                      68     84 ;
017b  3e 10           69     85 SW8080:	MVI	A,16
017d  21 b7 01        70     86 		LXI	H,S8080
0180  c3 88 01        71     87 		JMP	DOSW
0183  3e 20           72     88 SWZ80:	MVI	A,32
0185  21 9d 01        73     89 		LXI	H,SZ80
0188  4f              74     90 DOSW:	MOV	C,A	; SAVE CPU TYPE
0189  db a0           75     91 		IN	0A0H	; CHECK IF HARDWARE CONTROL PORT IS UNLOCKED
018b  b7              76     92 		ORA	A
018c  ca 93 01        77     93 		JZ	DOSW1
018f  3e aa           78     94 		MVI	A,0AAH	; UNLOCK HARDWARE CONTROL PORT
0191  d3 a0           79     95 		OUT	0A0H
0193  79              80     96 DOSW1:	MOV	A,C		; SWITCH CPU TYPE
0194  d3 a0           81     97 		OUT	0A0H
0196  32 9c 01        82     98 		STA	SWFLAG	; SET CPU SWITCHED FLAG
0199  c3 d2 01        83     99 		JMP	MSG
                      84    100 
019c                  85    101 SWFLAG:	DS	1
019d  53 77 69 74     86    102 SZ80:	DB	'Switched to Z80 processor$'
01a1  63 68 65 64     86    103
01a5  20 74 6f 20     86    104
01a9  5a 38 30 20     86    105
01ad  70 72 6f 63     86    106
01b1  65 73 73 6f     86    107
01b5  72 24           86    108
01b7  53 77 69 74     87    109 S8080:	DB	'Switched to 8080 processor$'
01bb  63 68 65 64     87    110
01bf  20 74 6f 20     87    111
01c3  38 30 38 30     87    112
01c7  20 70 72 6f     87    113
01cb  63 65 73 73     87    114
01cf  6f 72 24        87    115
                      88    116 
                      89    117 ;
                      90    118 ;MESSAGE OUTPUT ROUTINE
                      91    119 ;
01d2  7e              92    120 MSG:	MOV	A,M	; Get data
01d3  fe 24           93    121 		CPI	'$'	; End?
01d5  c8              94    122 		RZ
01d6  cd dd 01        95    123 		CALL	PCHAR	; Output
01d9  23              96    124 		INX	H	; Next
01da  c3 d2 01        97    125 		JMP	MSG	; Do all
                      98    126 ;
                      99    127 ;
                     100    128 ;CHARACTER OUTPUT ROUTINE
                     101    129 ;
01dd  f5             102    130 PCHAR:	PUSH	PSW
01de  d5             103    131 		PUSH	D
01df  e5             104    132 		PUSH	H
                     105    133 	IF ONCPM
01e0  5f             106    134 		MOV	E,A
01e1  0e 02          107    135 		MVI	C,2
01e3  cd 05 00       108    136 		CALL	BDOS
                     109    137 	ELSE
                     110    138 		OUT	IOCHAR
                     111    139 	ENDIF
01e6  e1             112    140 		POP 	H
01e7  d1             113    141 		POP	D
01e8  f1             114    142 		POP	PSW
01e9  c9             115    143 		RET
                     116    144 ;
                     117    145 ;
                     118    146 ;
01ea  f5             119    147 BYTEO:	PUSH	PSW
01eb  cd fa 01       120    148 		CALL	BYTO1
01ee  5f             121    149 		MOV	E,A
01ef  cd dd 01       122    150 		CALL	PCHAR
01f2  f1             123    151 		POP	PSW
01f3  cd fe 01       124    152 		CALL	BYTO2
01f6  5f             125    153 		MOV	E,A
01f7  c3 dd 01       126    154 		JMP	PCHAR
01fa  0f             127    155 BYTO1:	RRC
01fb  0f             128    156 		RRC
01fc  0f             129    157 		RRC
01fd  0f             130    158 		RRC
01fe  e6 0f          131    159 BYTO2:	ANI	0FH
0200  fe 0a          132    160 		CPI	0AH
0202  fa 07 02       133    161 		JM	BYTO3
0205  c6 07          134    162 		ADI	7
0207  c6 30          135    163 BYTO3:	ADI	30H
0209  c9             136    164 		RET
                     137    165 ;
                     138    166 ;
                     139    167 ;
                     140    168 ;************************************************************
                     141    169 ;           MESSAGE TABLE FOR OPERATIONAL CPU TEST
                     142    170 ;************************************************************
                     143    171 ;
020a  0d 0a          144    172 OKCPU:	DB	0DH,0AH
020c  43 50 55 20    145    173 		DB	'CPU IS OPERATIONAL$'
0210  49 53 20 4f    145    174
0214  50 45 52 41    145    175
0218  54 49 4f 4e    145    176
021c  41 4c 24       145    177
                     146    178 ;
021f  0d 0a          147    179 NGCPU:	DB	0DH,0AH
0221  20 43 50 55    148    180 		DB	' CPU HAS FAILED!    ERROR EXIT=$'
0225  20 48 41 53    148    181
0229  20 46 41 49    148    182
022d  4c 45 44 21    148    183
0231  20 20 20 20    148    184
0235  45 52 52 4f    148    185
0239  52 20 45 58    148    186
023d  49 54 3d 24    148    187
                     149    188 ;
                     150    189 ;
                     151    190 ;
                     152    191 ;************************************************************
                     153    192 ;                8080/8085 CPU TEST/DIAGNOSTIC
                     154    193 ;************************************************************
                     155    194 ;
                     156    195 ;NOTE: (1) PROGRAM ASSUMES "CALL",AND "LXI SP" INSTRUCTIONS WORK!
                     157    196 ;
                     158    197 ;      (2) INSTRUCTIONS NOT TESTED ARE "HLT","DI","EI",
                     159    198 ;          AND "RST 0" THRU "RST 7"
                     160    199 ;
                     161    200 ;
                     162    201 ;
                     163    202 ;TEST JUMP INSTRUCTIONS AND FLAGS
                     164    203 ;
0241  31 3a 08       165    204 CPU:	LXI	SP,STACK	;SET THE STACK POINTER
0244  e6 00          166    205 		ANI	0	;INITIALIZE A REG. AND CLEAR ALL FLAGS
0246  ca 4c 02       167    206 		JZ	J010	;TEST "JZ"
0249  cd 1f 07       168    207 		CALL	CPUER
024c  d2 52 02       169    208 J010:	JNC	J020	;TEST "JNC"
024f  cd 1f 07       170    209 		CALL	CPUER
0252  ea 58 02       171    210 J020:	JPE	J030	;TEST "JPE"
0255  cd 1f 07       172    211 		CALL	CPUER
0258  f2 5e 02       173    212 J030:	JP	J040	;TEST "JP"
025b  cd 1f 07       174    213 		CALL	CPUER
025e  c2 6d 02       175    214 J040:	JNZ	J050	;TEST "JNZ"
0261  da 6d 02       176    215 		JC	J050	;TEST "JC"
0264  e2 6d 02       177    216 		JPO	J050	;TEST "JPO"
0267  fa 6d 02       178    217 		JM	J050	;TEST "JM"
026a  c3 70 02       179    218 		JMP	J060	;TEST "JMP" (IT'S A LITTLE LATE,BUT WHAT THE HELL!
026d  cd 1f 07       180    219 J050:	CALL	CPUER
0270  c6 06          181    220 J060:	ADI	6	;A=6,C=0,P=1,S=0,Z=0
0272  c2 78 02       182    221 		JNZ	J070	;TEST "JNZ"
0275  cd 1f 07       183    222 		CALL	CPUER
0278  da 81 02       184    223 J070:	JC	J080	;TEST "JC"
027b  e2 81 02       185    224 		JPO	J080	;TEST "JPO"
027e  f2 84 02       186    225 		JP	J090	;TEST "JP"
0281  cd 1f 07       187    226 J080:	CALL	CPUER
0284  c6 70          188    227 J090:	ADI	070H	;A=76H,C=0,P=0,S=0,Z=0
0286  e2 8c 02       189    228 		JPO	J100	;TEST "JPO"
0289  cd 1f 07       190    229 		CALL	CPUER
028c  fa 95 02       191    230 J100:	JM	J110	;TEST "JM"
028f  ca 95 02       192    231 		JZ	J110	;TEST "JZ"
0292  d2 98 02       193    232 		JNC	J120	;TEST "JNC"
0295  cd 1f 07       194    233 J110:	CALL	CPUER
0298  c6 81          195    234 J120:	ADI	081H	;A=F7H,C=0,P=0,S=1,Z=0
029a  fa a0 02       196    235 		JM	J130	;TEST "JM"
029d  cd 1f 07       197    236 		CALL	CPUER
02a0  ca a9 02       198    237 J130:	JZ	J140	;TEST "JZ"
02a3  da a9 02       199    238 		JC	J140	;TEST "JC"
02a6  e2 ac 02       200    239 		JPO	J150	;TEST "JPO"
02a9  cd 1f 07       201    240 J140:	CALL	CPUER
02ac  c6 fe          202    241 J150:	ADI	0FEH	;A=F5H,C=1,P=1,S=1,Z=0
02ae  da b4 02       203    242 		JC	J160	;TEST "JC"
02b1  cd 1f 07       204    243 		CALL	CPUER
02b4  ca bd 02       205    244 J160:	JZ	J170	;TEST "JZ"
02b7  e2 bd 02       206    245 		JPO	J170	;TEST "JPO"
02ba  fa c0 02       207    246 		JM	AIMM	;TEST "JM"
02bd  cd 1f 07       208    247 J170:	CALL	CPUER
                     209    248 ;
                     210    249 ;
                     211    250 ;
                     212    251 ;TEST ACCUMULATOR IMMEDIATE INSTRUCTIONS
                     213    252 ;
02c0  fe 00          214    253 AIMM:	CPI	0	;A=F5H,C=0,Z=0
02c2  da d8 02       215    254 		JC	CPIE	;TEST "CPI" FOR RE-SET CARRY
02c5  ca d8 02       216    255 		JZ	CPIE	;TEST "CPI" FOR RE-SET ZERO
02c8  fe f5          217    256 		CPI	0F5H	;A=F5H,C=0,Z=1
02ca  da d8 02       218    257 		JC	CPIE	;TEST "CPI" FOR RE-SET CARRY ("ADI")
02cd  c2 d8 02       219    258 		JNZ	CPIE	;TEST "CPI" FOR RE-SET ZERO
02d0  fe ff          220    259 		CPI	0FFH	;A=F5H,C=1,Z=0
02d2  ca d8 02       221    260 		JZ	CPIE	;TEST "CPI" FOR RE-SET ZERO
02d5  da db 02       222    261 		JC	ACII	;TEST "CPI" FOR SET CARRY
02d8  cd 1f 07       223    262 CPIE:	CALL	CPUER
02db  ce 0a          224    263 ACII:	ACI	00AH	;A=F5H+0AH+CARRY(1)=0,C=1
02dd  ce 0a          225    264 		ACI	00AH	;A=0+0AH+CARRY(0)=0BH,C=0
02df  fe 0b          226    265 		CPI	00BH
02e1  ca e7 02       227    266 		JZ	SUII	;TEST "ACI"
02e4  cd 1f 07       228    267 		CALL	CPUER
02e7  d6 0c          229    268 SUII:	SUI	00CH	;A=FFH,C=0
02e9  d6 0f          230    269 		SUI	00FH	;A=F0H,C=1
02eb  fe f0          231    270 		CPI	0F0H
02ed  ca f3 02       232    271 		JZ	SBII	;TEST "SUI"
02f0  cd 1f 07       233    272 		CALL	CPUER
02f3  de f1          234    273 SBII:	SBI	0F1H	;A=F0H-0F1H-CARRY(0)=FFH,C=1
02f5  de 0e          235    274 		SBI	00EH	;A=FFH-OEH-CARRY(1)=F0H,C=0
02f7  fe f0          236    275 		CPI	0F0H
02f9  ca ff 02       237    276 		JZ	ANII	;TEST "SBI"
02fc  cd 1f 07       238    277 		CALL	CPUER
02ff  e6 55          239    278 ANII:	ANI	055H	;A=F0H<AND>55H=50H,C=0,P=1,S=0,Z=0
0301  fe 50          240    279 		CPI	050H
0303  ca 09 03       241    280 		JZ	ORII	;TEST "ANI"
0306  cd 1f 07       242    281 		CALL	CPUER
0309  f6 3a          243    282 ORII:	ORI	03AH	;A=50H<OR>3AH=7AH,C=0,P=0,S=0,Z=0
030b  fe 7a          244    283 		CPI	07AH
030d  ca 13 03       245    284 		JZ	XRII	;TEST "ORI"
0310  cd 1f 07       246    285 		CALL	CPUER
0313  ee 0f          247    286 XRII:	XRI	00FH	;A=7AH<XOR>0FH=75H,C=0,P=0,S=0,Z=0
0315  fe 75          248    287 		CPI	075H
0317  ca 1d 03       249    288 		JZ	C010	;TEST "XRI"
031a  cd 1f 07       250    289 		CALL	CPUER
                     251    290 ;
                     252    291 ;
                     253    292 ;
                     254    293 ;TEST CALLS AND RETURNS
                     255    294 ;
031d  e6 00          256    295 C010:	ANI	000H	;A=0,C=0,P=1,S=0,Z=1
031f  dc 1f 07       257    296 		CC	CPUER	;TEST "CC"
0322  e4 1f 07       258    297 		CPO	CPUER	;TEST "CPO"
0325  fc 1f 07       259    298 		CM	CPUER	;TEST "CM"
0328  c4 1f 07       260    299 		CNZ	CPUER	;TEST "CNZ"
032b  fe 00          261    300 		CPI	000H
032d  ca 33 03       262    301 		JZ	C020	;A=0,C=0,P=0,S=0,Z=1
0330  cd 1f 07       263    302 		CALL	CPUER
0333  d6 77          264    303 C020:	SUI	077H	;A=89H,C=1,P=0,S=1,Z=0
0335  d4 1f 07       265    304 		CNC	CPUER	;TEST "CNC"
0338  ec 1f 07       266    305 		CPE	CPUER	;TEST "CPE"
033b  f4 1f 07       267    306 		CP	CPUER	;TEST "CP"
033e  cc 1f 07       268    307 		CZ	CPUER	;TEST "CZ"
0341  fe 89          269    308 		CPI	089H
0343  ca 49 03       270    309 		JZ	C030	;TEST FOR "CALLS" TAKING BRANCH
0346  cd 1f 07       271    310 		CALL	CPUER
0349  e6 ff          272    311 C030:	ANI	0FFH	;SET FLAGS BACK!
034b  e4 56 03       273    312 		CPO	CPOI	;TEST "CPO"
034e  fe d9          274    313 		CPI	0D9H
0350  ca b3 03       275    314 		JZ	MOVI	;TEST "CALL" SEQUENCE SUCCESS
0353  cd 1f 07       276    315 		CALL	CPUER
0356  e8             277    316 CPOI:	RPE		;TEST "RPE"
0357  c6 10          278    317 		ADI	010H	;A=99H,C=0,P=0,S=1,Z=0
0359  ec 62 03       279    318 		CPE	CPEI	;TEST "CPE"
035c  c6 02          280    319 		ADI	002H	;A=D9H,C=0,P=0,S=1,Z=0
035e  e0             281    320 		RPO		;TEST "RPO"
035f  cd 1f 07       282    321 		CALL	CPUER
0362  e0             283    322 CPEI:	RPO		;TEST "RPO"
0363  c6 20          284    323 		ADI	020H	;A=B9H,C=0,P=0,S=1,Z=0
0365  fc 6e 03       285    324 		CM	CMI	;TEST "CM"
0368  c6 04          286    325 		ADI	004H	;A=D7H,C=0,P=1,S=1,Z=0
036a  e8             287    326 		RPE		;TEST "RPE"
036b  cd 1f 07       288    327 		CALL	CPUER
036e  f0             289    328 CMI:	RP		;TEST "RP"
036f  c6 80          290    329 		ADI	080H	;A=39H,C=1,P=1,S=0,Z=0
0371  f4 7a 03       291    330 		CP	TCPI	;TEST "CP"
0374  c6 80          292    331 		ADI	080H	;A=D3H,C=0,P=0,S=1,Z=0
0376  f8             293    332 		RM		;TEST "RM"
0377  cd 1f 07       294    333 		CALL	CPUER
037a  f8             295    334 TCPI:	RM		;TEST "RM"
037b  c6 40          296    335 		ADI	040H	;A=79H,C=0,P=0,S=0,Z=0
037d  d4 86 03       297    336 		CNC	CNCI	;TEST "CNC"
0380  c6 40          298    337 		ADI	040H	;A=53H,C=0,P=1,S=0,Z=0
0382  f0             299    338 		RP		;TEST "RP"
0383  cd 1f 07       300    339 		CALL	CPUER
0386  d8             301    340 CNCI:	RC		;TEST "RC"
0387  c6 8f          302    341 		ADI	08FH	;A=08H,C=1,P=0,S=0,Z=0
0389  dc 92 03       303    342 		CC	CCI	;TEST "CC"
038c  d6 02          304    343 		SUI	002H	;A=13H,C=0,P=0,S=0,Z=0
038e  d0             305    344 		RNC		;TEST "RNC"
038f  cd 1f 07       306    345 		CALL	CPUER
0392  d0             307    346 CCI:	RNC		;TEST "RNC"
0393  c6 f7          308    347 		ADI	0F7H	;A=FFH,C=0,P=1,S=1,Z=0
0395  c4 9e 03       309    348 		CNZ	CNZI	;TEST "CNZ"
0398  c6 fe          310    349 		ADI	0FEH	;A=15H,C=1,P=0,S=0,Z=0
039a  d8             311    350 		RC		;TEST "RC"
039b  cd 1f 07       312    351 		CALL	CPUER
039e  c8             313    352 CNZI:	RZ		;TEST "RZ"
039f  c6 01          314    353 		ADI	001H	;A=00H,C=1,P=1,S=0,Z=1
03a1  cc aa 03       315    354 		CZ	CZI	;TEST "CZ"
03a4  c6 d0          316    355 		ADI	0D0H	;A=17H,C=1,P=1,S=0,Z=0
03a6  c0             317    356 		RNZ		;TEST "RNZ"
03a7  cd 1f 07       318    357 		CALL	CPUER
03aa  c0             319    358 CZI:	RNZ		;TEST "RNZ"
03ab  c6 47          320    359 		ADI	047H	;A=47H,C=0,P=1,S=0,Z=0
03ad  fe 47          321    360 		CPI	047H	;A=47H,C=0,P=1,S=0,Z=1
03af  c8             322    361 		RZ		;TEST "RZ"
03b0  cd 1f 07       323    362 		CALL	CPUER
                     324    363 ;
                     325    364 ;
                     326    365 ;
                     327    366 ;TEST "MOV","INR",AND "DCR" INSTRUCTIONS
                     328    367 ;
03b3  3e 77          329    368 MOVI:	MVI	A,077H
03b5  3c             330    369 		INR	A
03b6  47             331    370 		MOV	B,A
03b7  04             332    371 		INR	B
03b8  48             333    372 		MOV	C,B
03b9  0d             334    373 		DCR	C
03ba  51             335    374 		MOV	D,C
03bb  5a             336    375 		MOV	E,D
03bc  63             337    376 		MOV	H,E
03bd  6c             338    377 		MOV	L,H
03be  7d             339    378 		MOV	A,L	;TEST "MOV" A,L,H,E,D,C,B,A
03bf  3d             340    379 		DCR	A
03c0  4f             341    380 		MOV	C,A
03c1  59             342    381 		MOV	E,C
03c2  6b             343    382 		MOV	L,E
03c3  45             344    383 		MOV	B,L
03c4  50             345    384 		MOV	D,B
03c5  62             346    385 		MOV	H,D
03c6  7c             347    386 		MOV	A,H	;TEST "MOV" A,H,D,B,L,E,C,A
03c7  57             348    387 		MOV	D,A
03c8  14             349    388 		INR	D
03c9  6a             350    389 		MOV	L,D
03ca  4d             351    390 		MOV	C,L
03cb  0c             352    391 		INR	C
03cc  61             353    392 		MOV	H,C
03cd  44             354    393 		MOV	B,H
03ce  05             355    394 		DCR	B
03cf  58             356    395 		MOV	E,B
03d0  7b             357    396 		MOV	A,E	;TEST "MOV" A,E,B,H,C,L,D,A
03d1  5f             358    397 		MOV	E,A
03d2  1c             359    398 		INR	E
03d3  43             360    399 		MOV	B,E
03d4  60             361    400 		MOV	H,B
03d5  24             362    401 		INR	H
03d6  4c             363    402 		MOV	C,H
03d7  69             364    403 		MOV	L,C
03d8  55             365    404 		MOV	D,L
03d9  15             366    405 		DCR	D
03da  7a             367    406 		MOV	A,D	;TEST "MOV" A,D,L,C,H,B,E,A
03db  67             368    407 		MOV	H,A
03dc  25             369    408 		DCR	H
03dd  54             370    409 		MOV	D,H
03de  42             371    410 		MOV	B,D
03df  68             372    411 		MOV	L,B
03e0  2c             373    412 		INR	L
03e1  5d             374    413 		MOV	E,L
03e2  1d             375    414 		DCR	E
03e3  4b             376    415 		MOV	C,E
03e4  79             377    416 		MOV	A,C	;TEST "MOV" A,C,E,L,B,D,H,A
03e5  6f             378    417 		MOV	L,A
03e6  2d             379    418 		DCR	L
03e7  65             380    419 		MOV	H,L
03e8  5c             381    420 		MOV	E,H
03e9  53             382    421 		MOV	D,E
03ea  4a             383    422 		MOV	C,D
03eb  41             384    423 		MOV	B,C
03ec  78             385    424 		MOV	A,B
03ed  fe 77          386    425 		CPI	077H
03ef  c4 1f 07       387    426 		CNZ	CPUER	;TEST "MOV" A,B,C,D,E,H,L,A
                     388    427 ;
                     389    428 ;
                     390    429 ;
                     391    430 ;TEST ARITHMETIC AND LOGIC INSTRUCTIONS
                     392    431 ;
03f2  af             393    432 		XRA	A
03f3  06 01          394    433 		MVI	B,001H
03f5  0e 03          395    434 		MVI	C,003H
03f7  16 07          396    435 		MVI	D,007H
03f9  1e 0f          397    436 		MVI	E,00FH
03fb  26 1f          398    437 		MVI	H,01FH
03fd  2e 3f          399    438 		MVI	L,03FH
03ff  80             400    439 		ADD	B
0400  81             401    440 		ADD	C
0401  82             402    441 		ADD	D
0402  83             403    442 		ADD	E
0403  84             404    443 		ADD	H
0404  85             405    444 		ADD	L
0405  87             406    445 		ADD	A
0406  fe f0          407    446 		CPI	0F0H
0408  c4 1f 07       408    447 		CNZ	CPUER	;TEST "ADD" B,C,D,E,H,L,A
040b  90             409    448 		SUB	B
040c  91             410    449 		SUB	C
040d  92             411    450 		SUB	D
040e  93             412    451 		SUB	E
040f  94             413    452 		SUB	H
0410  95             414    453 		SUB	L
0411  fe 78          415    454 		CPI	078H
0413  c4 1f 07       416    455 		CNZ	CPUER	;TEST "SUB" B,C,D,E,H,L
0416  97             417    456 		SUB	A
0417  c4 1f 07       418    457 		CNZ	CPUER	;TEST "SUB" A
041a  3e 80          419    458 		MVI	A,080H
041c  87             420    459 		ADD	A
041d  06 01          421    460 		MVI	B,001H
041f  0e 02          422    461 		MVI	C,002H
0421  16 03          423    462 		MVI	D,003H
0423  1e 04          424    463 		MVI	E,004H
0425  26 05          425    464 		MVI	H,005H
0427  2e 06          426    465 		MVI	L,006H
0429  88             427    466 		ADC	B
042a  06 80          428    467 		MVI	B,080H
042c  80             429    468 		ADD	B
042d  80             430    469 		ADD	B
042e  89             431    470 		ADC	C
042f  80             432    471 		ADD	B
0430  80             433    472 		ADD	B
0431  8a             434    473 		ADC	D
0432  80             435    474 		ADD	B
0433  80             436    475 		ADD	B
0434  8b             437    476 		ADC	E
0435  80             438    477 		ADD	B
0436  80             439    478 		ADD	B
0437  8c             440    479 		ADC	H
0438  80             441    480 		ADD	B
0439  80             442    481 		ADD	B
043a  8d             443    482 		ADC	L
043b  80             444    483 		ADD	B
043c  80             445    484 		ADD	B
043d  8f             446    485 		ADC	A
043e  fe 37          447    486 		CPI	037H
0440  c4 1f 07       448    487 		CNZ	CPUER	;TEST "ADC" B,C,D,E,H,L,A
0443  3e 80          449    488 		MVI	A,080H
0445  87             450    489 		ADD	A
0446  06 01          451    490 		MVI	B,001H
0448  98             452    491 		SBB	B
0449  06 ff          453    492 		MVI	B,0FFH
044b  80             454    493 		ADD	B
044c  99             455    494 		SBB	C
044d  80             456    495 		ADD	B
044e  9a             457    496 		SBB	D
044f  80             458    497 		ADD	B
0450  9b             459    498 		SBB	E
0451  80             460    499 		ADD	B
0452  9c             461    500 		SBB	H
0453  80             462    501 		ADD	B
0454  9d             463    502 		SBB	L
0455  fe e0          464    503 		CPI	0E0H
0457  c4 1f 07       465    504 		CNZ	CPUER	;TEST "SBB" B,C,D,E,H,L
045a  3e 80          466    505 		MVI	A,080H
045c  87             467    506 		ADD	A
045d  9f             468    507 		SBB	A
045e  fe ff          469    508 		CPI	0FFH
0460  c4 1f 07       470    509 		CNZ	CPUER	;TEST "SBB" A
0463  3e ff          471    510 		MVI	A,0FFH
0465  06 fe          472    511 		MVI	B,0FEH
0467  0e fc          473    512 		MVI	C,0FCH
0469  16 ef          474    513 		MVI	D,0EFH
046b  1e 7f          475    514 		MVI	E,07FH
046d  26 f4          476    515 		MVI	H,0F4H
046f  2e bf          477    516 		MVI	L,0BFH
0471  a7             478    517 		ANA	A
0472  a1             479    518 		ANA	C
0473  a2             480    519 		ANA	D
0474  a3             481    520 		ANA	E
0475  a4             482    521 		ANA	H
0476  a5             483    522 		ANA	L
0477  a7             484    523 		ANA	A
0478  fe 24          485    524 		CPI	024H
047a  c4 1f 07       486    525 		CNZ	CPUER	;TEST "ANA" B,C,D,E,H,L,A
047d  af             487    526 		XRA	A
047e  06 01          488    527 		MVI	B,001H
0480  0e 02          489    528 		MVI	C,002H
0482  16 04          490    529 		MVI	D,004H
0484  1e 08          491    530 		MVI	E,008H
0486  26 10          492    531 		MVI	H,010H
0488  2e 20          493    532 		MVI	L,020H
048a  b0             494    533 		ORA	B
048b  b1             495    534 		ORA	C
048c  b2             496    535 		ORA	D
048d  b3             497    536 		ORA	E
048e  b4             498    537 		ORA	H
048f  b5             499    538 		ORA	L
0490  b7             500    539 		ORA	A
0491  fe 3f          501    540 		CPI	03FH
0493  c4 1f 07       502    541 		CNZ	CPUER	;TEST "ORA" B,C,D,E,H,L,A
0496  3e 00          503    542 		MVI	A,000H
0498  26 8f          504    543 		MVI	H,08FH
049a  2e 4f          505    544 		MVI	L,04FH
049c  a8             506    545 		XRA	B
049d  a9             507    546 		XRA	C
049e  aa             508    547 		XRA	D
049f  ab             509    548 		XRA	E
04a0  ac             510    549 		XRA	H
04a1  ad             511    550 		XRA	L
04a2  fe cf          512    551 		CPI	0CFH
04a4  c4 1f 07       513    552 		CNZ	CPUER	;TEST "XRA" B,C,D,E,H,L
04a7  af             514    553 		XRA	A
04a8  c4 1f 07       515    554 		CNZ	CPUER	;TEST "XRA" A
04ab  06 44          516    555 		MVI	B,044H
04ad  0e 45          517    556 		MVI	C,045H
04af  16 46          518    557 		MVI	D,046H
04b1  1e 47          519    558 		MVI	E,047H
04b3  26 07          520    559 		MVI	H,HIGH TEMP0	;HIGH BYTE OF TEST MEMORY LOCATION
04b5  2e 3c          521    560 		MVI	L,LOW TEMP0	;LOW BYTE OF TEST MEMORY LOCATION
04b7  70             522    561 		MOV	M,B
04b8  06 00          523    562 		MVI	B,000H
04ba  46             524    563 		MOV	B,M
04bb  3e 44          525    564 		MVI	A,044H
04bd  b8             526    565 		CMP	B
04be  c4 1f 07       527    566 		CNZ	CPUER	;TEST "MOV" M,B AND B,M
04c1  72             528    567 		MOV	M,D
04c2  16 00          529    568 		MVI	D,000H
04c4  56             530    569 		MOV	D,M
04c5  3e 46          531    570 		MVI	A,046H
04c7  ba             532    571 		CMP	D
04c8  c4 1f 07       533    572 		CNZ	CPUER	;TEST "MOV" M,D AND D,M
04cb  73             534    573 		MOV	M,E
04cc  1e 00          535    574 		MVI	E,000H
04ce  5e             536    575 		MOV	E,M
04cf  3e 47          537    576 		MVI	A,047H
04d1  bb             538    577 		CMP	E
04d2  c4 1f 07       539    578 		CNZ	CPUER	;TEST "MOV" M,E AND E,M
04d5  74             540    579 		MOV	M,H
04d6  26 07          541    580 		MVI	H,HIGH TEMP0
04d8  2e 3c          542    581 		MVI	L,LOW TEMP0
04da  66             543    582 		MOV	H,M
04db  3e 07          544    583 		MVI	A,HIGH TEMP0
04dd  bc             545    584 		CMP	H
04de  c4 1f 07       546    585 		CNZ	CPUER	;TEST "MOV" M,H AND H,M
04e1  75             547    586 		MOV	M,L
04e2  26 07          548    587 		MVI	H,HIGH TEMP0
04e4  2e 3c          549    588 		MVI	L,LOW TEMP0
04e6  6e             550    589 		MOV	L,M
04e7  3e 3c          551    590 		MVI	A,LOW TEMP0
04e9  bd             552    591 		CMP	L
04ea  c4 1f 07       553    592 		CNZ	CPUER	;TEST "MOV" M,L AND L,M
04ed  26 07          554    593 		MVI	H,HIGH TEMP0
04ef  2e 3c          555    594 		MVI	L,LOW TEMP0
04f1  3e 32          556    595 		MVI	A,032H
04f3  77             557    596 		MOV	M,A
04f4  be             558    597 		CMP	M
04f5  c4 1f 07       559    598 		CNZ	CPUER	;TEST "MOV" M,A
04f8  86             560    599 		ADD	M
04f9  fe 64          561    600 		CPI	064H
04fb  c4 1f 07       562    601 		CNZ	CPUER	;TEST "ADD" M
04fe  af             563    602 		XRA	A
04ff  7e             564    603 		MOV	A,M
0500  fe 32          565    604 		CPI	032H
0502  c4 1f 07       566    605 		CNZ	CPUER	;TEST "MOV" A,M
0505  26 07          567    606 		MVI	H,HIGH TEMP0
0507  2e 3c          568    607 		MVI	L,LOW TEMP0
0509  7e             569    608 		MOV	A,M
050a  96             570    609 		SUB	M
050b  c4 1f 07       571    610 		CNZ	CPUER	;TEST "SUB" M
050e  3e 80          572    611 		MVI	A,080H
0510  87             573    612 		ADD	A
0511  8e             574    613 		ADC	M
0512  fe 33          575    614 		CPI	033H
0514  c4 1f 07       576    615 		CNZ	CPUER	;TEST "ADC" M
0517  3e 80          577    616 		MVI	A,080H
0519  87             578    617 		ADD	A
051a  9e             579    618 		SBB	M
051b  fe cd          580    619 		CPI	0CDH
051d  c4 1f 07       581    620 		CNZ	CPUER	;TEST "SBB" M
0520  a6             582    621 		ANA	M
0521  c4 1f 07       583    622 		CNZ	CPUER	;TEST "ANA" M
0524  3e 25          584    623 		MVI	A,025H
0526  b6             585    624 		ORA	M
0527  fe 37          586    625 		CPI	037H
0529  c4 1f 07       587    626 		CNZ	CPUER	;TEST "ORA" M
052c  ae             588    627 		XRA	M
052d  fe 05          589    628 		CPI	005H
052f  c4 1f 07       590    629 		CNZ	CPUER	;TEST "XRA" M
0532  36 55          591    630 		MVI	M,055H
0534  34             592    631 		INR	M
0535  35             593    632 		DCR	M
0536  86             594    633 		ADD	M
0537  fe 5a          595    634 		CPI	05AH
0539  c4 1f 07       596    635 		CNZ	CPUER	;TEST "INR","DCR",AND "MVI" M
053c  01 ff 12       597    636 		LXI	B,12FFH
053f  11 ff 12       598    637 		LXI	D,12FFH
0542  21 ff 12       599    638 		LXI	H,12FFH
0545  03             600    639 		INX	B
0546  13             601    640 		INX	D
0547  23             602    641 		INX	H
0548  3e 13          603    642 		MVI	A,013H
054a  b8             604    643 		CMP	B
054b  c4 1f 07       605    644 		CNZ	CPUER	;TEST "LXI" AND "INX" B
054e  ba             606    645 		CMP	D
054f  c4 1f 07       607    646 		CNZ	CPUER	;TEST "LXI" AND "INX" D
0552  bc             608    647 		CMP	H
0553  c4 1f 07       609    648 		CNZ	CPUER	;TEST "LXI" AND "INX" H
0556  3e 00          610    649 		MVI	A,000H
0558  b9             611    650 		CMP	C
0559  c4 1f 07       612    651 		CNZ	CPUER	;TEST "LXI" AND "INX" B
055c  bb             613    652 		CMP	E
055d  c4 1f 07       614    653 		CNZ	CPUER	;TEST "LXI" AND "INX" D
0560  bd             615    654 		CMP	L
0561  c4 1f 07       616    655 		CNZ	CPUER	;TEST "LXI" AND "INX" H
0564  0b             617    656 		DCX	B
0565  1b             618    657 		DCX	D
0566  2b             619    658 		DCX	H
0567  3e 12          620    659 		MVI	A,012H
0569  b8             621    660 		CMP	B
056a  c4 1f 07       622    661 		CNZ	CPUER	;TEST "DCX" B
056d  ba             623    662 		CMP	D
056e  c4 1f 07       624    663 		CNZ	CPUER	;TEST "DCX" D
0571  bc             625    664 		CMP	H
0572  c4 1f 07       626    665 		CNZ	CPUER	;TEST "DCX" H
0575  3e ff          627    666 		MVI	A,0FFH
0577  b9             628    667 		CMP	C
0578  c4 1f 07       629    668 		CNZ	CPUER	;TEST "DCX" B
057b  bb             630    669 		CMP	E
057c  c4 1f 07       631    670 		CNZ	CPUER	;TEST "DCX" D
057f  bd             632    671 		CMP	L
0580  c4 1f 07       633    672 		CNZ	CPUER	;TEST "DCX" H
0583  32 3c 07       634    673 		STA	TEMP0
0586  af             635    674 		XRA	A
0587  3a 3c 07       636    675 		LDA	TEMP0
058a  fe ff          637    676 		CPI	0FFH
058c  c4 1f 07       638    677 		CNZ	CPUER	;TEST "LDA" AND "STA"
058f  2a 3a 07       639    678 		LHLD	TEMPP
0592  22 3c 07       640    679 		SHLD	TEMP0
0595  3a 3a 07       641    680 		LDA	TEMPP
0598  47             642    681 		MOV	B,A
0599  3a 3c 07       643    682 		LDA	TEMP0
059c  b8             644    683 		CMP	B
059d  c4 1f 07       645    684 		CNZ	CPUER	;TEST "LHLD" AND "SHLD"
05a0  3a 3b 07       646    685 		LDA	TEMPP+1
05a3  47             647    686 		MOV	B,A
05a4  3a 3d 07       648    687 		LDA	TEMP0+1
05a7  b8             649    688 		CMP	B
05a8  c4 1f 07       650    689 		CNZ	CPUER	;TEST "LHLD" AND "SHLD"
05ab  3e aa          651    690 		MVI	A,0AAH
05ad  32 3c 07       652    691 		STA	TEMP0
05b0  44             653    692 		MOV	B,H
05b1  4d             654    693 		MOV	C,L
05b2  af             655    694 		XRA	A
05b3  0a             656    695 		LDAX	B
05b4  fe aa          657    696 		CPI	0AAH
05b6  c4 1f 07       658    697 		CNZ	CPUER	;TEST "LDAX" B
05b9  3c             659    698 		INR	A
05ba  02             660    699 		STAX	B
05bb  3a 3c 07       661    700 		LDA	TEMP0
05be  fe ab          662    701 		CPI	0ABH
05c0  c4 1f 07       663    702 		CNZ	CPUER	;TEST "STAX" B
05c3  3e 77          664    703 		MVI	A,077H
05c5  32 3c 07       665    704 		STA	TEMP0
05c8  2a 3a 07       666    705 		LHLD	TEMPP
05cb  11 00 00       667    706 		LXI	D,00000H
05ce  eb             668    707 		XCHG
05cf  af             669    708 		XRA	A
05d0  1a             670    709 		LDAX	D
05d1  fe 77          671    710 		CPI	077H
05d3  c4 1f 07       672    711 		CNZ	CPUER	;TEST "LDAX" D AND "XCHG"
05d6  af             673    712 		XRA	A
05d7  84             674    713 		ADD	H
05d8  85             675    714 		ADD	L
05d9  c4 1f 07       676    715 		CNZ	CPUER	;TEST "XCHG"
05dc  3e cc          677    716 		MVI	A,0CCH
05de  12             678    717 		STAX	D
05df  3a 3c 07       679    718 		LDA	TEMP0
05e2  fe cc          680    719 		CPI	0CCH
05e4  12             681    720 		STAX	D
05e5  3a 3c 07       682    721 		LDA	TEMP0
05e8  fe cc          683    722 		CPI	0CCH
05ea  c4 1f 07       684    723 		CNZ	CPUER	;TEST "STAX" D
05ed  21 77 77       685    724 		LXI	H,07777H
05f0  29             686    725 		DAD	H
05f1  3e ee          687    726 		MVI	A,0EEH
05f3  bc             688    727 		CMP	H
05f4  c4 1f 07       689    728 		CNZ	CPUER	;TEST "DAD" H
05f7  bd             690    729 		CMP	L
05f8  c4 1f 07       691    730 		CNZ	CPUER	;TEST "DAD" H
05fb  21 55 55       692    731 		LXI	H,05555H
05fe  01 ff ff       693    732 		LXI	B,0FFFFH
0601  09             694    733 		DAD	B
0602  3e 55          695    734 		MVI	A,055H
0604  d4 1f 07       696    735 		CNC	CPUER	;TEST "DAD" B
0607  bc             697    736 		CMP	H
0608  c4 1f 07       698    737 		CNZ	CPUER	;TEST "DAD" B
060b  3e 54          699    738 		MVI	A,054H
060d  bd             700    739 		CMP	L
060e  c4 1f 07       701    740 		CNZ	CPUER	;TEST "DAD" B
0611  21 aa aa       702    741 		LXI	H,0AAAAH
0614  11 33 33       703    742 		LXI	D,03333H
0617  19             704    743 		DAD	D
0618  3e dd          705    744 		MVI	A,0DDH
061a  bc             706    745 		CMP	H
061b  c4 1f 07       707    746 		CNZ	CPUER	;TEST "DAD" D
061e  bd             708    747 		CMP	L
061f  c4 1f 07       709    748 		CNZ	CPUER	;TEST "DAD" B
0622  37             710    749 		STC
0623  d4 1f 07       711    750 		CNC	CPUER	;TEST "STC"
0626  3f             712    751 		CMC
0627  dc 1f 07       713    752 		CC	CPUER	;TEST "CMC
062a  3e aa          714    753 		MVI	A,0AAH
062c  2f             715    754 		CMA	
062d  fe 55          716    755 		CPI	055H
062f  c4 1f 07       717    756 		CNZ	CPUER	;TEST "CMA"
0632  b7             718    757 		ORA	A	;RE-SET AUXILIARY CARRY
0633  27             719    758 		DAA
0634  fe 55          720    759 		CPI	055H
0636  c4 1f 07       721    760 		CNZ	CPUER	;TEST "DAA"
0639  3e 88          722    761 		MVI	A,088H
063b  87             723    762 		ADD	A
063c  27             724    763 		DAA
063d  fe 76          725    764 		CPI	076H
063f  c4 1f 07       726    765 		CNZ	CPUER	;TEST "DAA"
0642  af             727    766 		XRA	A
0643  3e aa          728    767 		MVI	A,0AAH
0645  27             729    768 		DAA
0646  d4 1f 07       730    769 		CNC	CPUER	;TEST "DAA"
0649  fe 10          731    770 		CPI	010H
064b  c4 1f 07       732    771 		CNZ	CPUER	;TEST "DAA"
064e  af             733    772 		XRA	A
064f  3e 9a          734    773 		MVI	A,09AH
0651  27             735    774 		DAA
0652  d4 1f 07       736    775 		CNC	CPUER	;TEST "DAA"
0655  c4 1f 07       737    776 		CNZ	CPUER	;TEST "DAA"
0658  37             738    777 		STC
0659  3e 42          739    778 		MVI	A,042H
065b  07             740    779 		RLC
065c  dc 1f 07       741    780 		CC	CPUER	;TEST "RLC" FOR RE-SET CARRY
065f  07             742    781 		RLC
0660  d4 1f 07       743    782 		CNC	CPUER	;TEST "RLC" FOR SET CARRY
0663  fe 09          744    783 		CPI	009H
0665  c4 1f 07       745    784 		CNZ	CPUER	;TEST "RLC" FOR ROTATION
0668  0f             746    785 		RRC
0669  d4 1f 07       747    786 		CNC	CPUER	;TEST "RRC" FOR SET CARRY
066c  0f             748    787 		RRC
066d  fe 42          749    788 		CPI	042H
066f  c4 1f 07       750    789 		CNZ	CPUER	;TEST "RRC" FOR ROTATION
0672  17             751    790 		RAL
0673  17             752    791 		RAL
0674  d4 1f 07       753    792 		CNC	CPUER	;TEST "RAL" FOR SET CARRY
0677  fe 08          754    793 		CPI	008H
0679  c4 1f 07       755    794 		CNZ	CPUER	;TEST "RAL" FOR ROTATION
067c  1f             756    795 		RAR
067d  1f             757    796 		RAR
067e  dc 1f 07       758    797 		CC	CPUER	;TEST "RAR" FOR RE-SET CARRY
0681  fe 02          759    798 		CPI	002H
0683  c4 1f 07       760    799 		CNZ	CPUER	;TEST "RAR" FOR ROTATION
0686  01 34 12       761    800 		LXI	B,01234H
0689  11 aa aa       762    801 		LXI	D,0AAAAH
068c  21 55 55       763    802 		LXI	H,05555H
068f  af             764    803 		XRA	A
0690  c5             765    804 		PUSH	B
0691  d5             766    805 		PUSH	D
0692  e5             767    806 		PUSH	H
0693  f5             768    807 		PUSH	PSW
0694  01 00 00       769    808 		LXI	B,00000H
0697  11 00 00       770    809 		LXI	D,00000H
069a  21 00 00       771    810 		LXI	H,00000H
069d  3e c0          772    811 		MVI	A,0C0H
069f  c6 f0          773    812 		ADI	0F0H
06a1  f1             774    813 		POP	PSW
06a2  e1             775    814 		POP	H
06a3  d1             776    815 		POP	D
06a4  c1             777    816 		POP	B
06a5  dc 1f 07       778    817 		CC	CPUER	;TEST "PUSH PSW" AND "POP PSW"
06a8  c4 1f 07       779    818 		CNZ	CPUER	;TEST "PUSH PSW" AND "POP PSW"
06ab  e4 1f 07       780    819 		CPO	CPUER	;TEST "PUSH PSW" AND "POP PSW"
06ae  fc 1f 07       781    820 		CM	CPUER	;TEST "PUSH PSW" AND "POP PSW"
06b1  3e 12          782    821 		MVI	A,012H
06b3  b8             783    822 		CMP	B
06b4  c4 1f 07       784    823 		CNZ	CPUER	;TEST "PUSH B" AND "POP B"
06b7  3e 34          785    824 		MVI	A,034H
06b9  b9             786    825 		CMP	C
06ba  c4 1f 07       787    826 		CNZ	CPUER	;TEST "PUSH B" AND "POP B"
06bd  3e aa          788    827 		MVI	A,0AAH
06bf  ba             789    828 		CMP	D
06c0  c4 1f 07       790    829 		CNZ	CPUER	;TEST "PUSH D" AND "POP D"
06c3  bb             791    830 		CMP	E
06c4  c4 1f 07       792    831 		CNZ	CPUER	;TEST "PUSH D" AND "POP D"
06c7  3e 55          793    832 		MVI	A,055H
06c9  bc             794    833 		CMP	H
06ca  c4 1f 07       795    834 		CNZ	CPUER	;TEST "PUSH H" AND "POP H"
06cd  bd             796    835 		CMP	L
06ce  c4 1f 07       797    836 		CNZ	CPUER	;TEST "PUSH H" AND "POP H"
06d1  21 00 00       798    837 		LXI	H,00000H
06d4  39             799    838 		DAD	SP
06d5  22 41 07       800    839 		SHLD	SAVSTK	;SAVE THE "OLD" STACK-POINTER!
06d8  31 40 07       801    840 		LXI	SP,TEMP4
06db  3b             802    841 		DCX	SP
06dc  3b             803    842 		DCX	SP
06dd  33             804    843 		INX	SP
06de  3b             805    844 		DCX	SP
06df  3e 55          806    845 		MVI	A,055H
06e1  32 3e 07       807    846 		STA	TEMP2
06e4  2f             808    847 		CMA
06e5  32 3f 07       809    848 		STA	TEMP3
06e8  c1             810    849 		POP	B
06e9  b8             811    850 		CMP	B
06ea  c4 1f 07       812    851 		CNZ	CPUER	;TEST "LXI","DAD","INX",AND "DCX" SP
06ed  2f             813    852 		CMA
06ee  b9             814    853 		CMP	C
06ef  c4 1f 07       815    854 		CNZ	CPUER	;TEST "LXI","DAD","INX", AND "DCX" SP
06f2  21 40 07       816    855 		LXI	H,TEMP4
06f5  f9             817    856 		SPHL
06f6  21 33 77       818    857 		LXI	H,07733H
06f9  3b             819    858 		DCX	SP
06fa  3b             820    859 		DCX	SP
06fb  e3             821    860 		XTHL
06fc  3a 3f 07       822    861 		LDA	TEMP3
06ff  fe 77          823    862 		CPI	077H
0701  c4 1f 07       824    863 		CNZ	CPUER	;TEST "SPHL" AND "XTHL"
0704  3a 3e 07       825    864 		LDA	TEMP2
0707  fe 33          826    865 		CPI	033H
0709  c4 1f 07       827    866 		CNZ	CPUER	;TEST "SPHL" AND "XTHL"
070c  3e 55          828    867 		MVI	A,055H
070e  bd             829    868 		CMP	L
070f  c4 1f 07       830    869 		CNZ	CPUER	;TEST "SPHL" AND "XTHL"
0712  2f             831    870 		CMA
0713  bc             832    871 		CMP	H
0714  c4 1f 07       833    872 		CNZ	CPUER	;TEST "SPHL" AND "XTHL"
0717  2a 41 07       834    873 		LHLD	SAVSTK	;RESTORE THE "OLD" STACK-POINTER
071a  f9             835    874 		SPHL
071b  21 31 07       836    875 		LXI	H,CPUOK
071e  e9             837    876 		PCHL		;TEST "PCHL"
                     838    877 ;
                     839    878 ;
                     840    879 ;
071f  21 1f 02       841    880 CPUER:	LXI	H,NGCPU	;OUTPUT "CPU HAS FAILED    ERROR EXIT=" TO CONSOLE
0722  cd d2 01       842    881 		CALL	MSG
0725  e3             843    882 		XTHL
0726  7c             844    883 		MOV	A,H
0727  cd ea 01       845    884 		CALL	BYTEO	;SHOW ERROR EXIT ADDRESS HIGH BYTE
072a  7d             846    885 		MOV	A,L
072b  cd ea 01       847    886 		CALL	BYTEO	;SHOW ERROR EXIT ADDRESS LOW BYTE
072e  c3 64 01       848    887 		JMP	WBOOT	;EXIT TO CP/M WARM BOOT
                     849    888 ;
                     850    889 ;
                     851    890 ;
0731  21 0a 02       852    891 CPUOK:	LXI	H,OKCPU	;OUTPUT "CPU IS OPERATIONAL" TO CONSOLE
0734  cd d2 01       853    892 		CALL	MSG
0737  c3 64 01       854    893 		JMP	WBOOT	;EXIT TO CP/M WARM BOOT
                     855    894 ;
                     856    895 ;
                     857    896 ;
073a  3c 07          858    897 TEMPP:	DW	TEMP0	;POINTER USED TO TEST "LHLD","SHLD",
                     859    898 			; AND "LDAX" INSTRUCTIONS
                     860    899 ;
073c                 861    900 TEMP0:	DS	1	;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS
073d                 862    901 TEMP1:	DS	1	;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS
073e                 863    902 TEMP2:	DS	1	;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS
073f                 864    903 TEMP3:	DS	1	;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS
0740                 865    904 TEMP4:	DS	1	;TEMPORARY STORAGE FOR CPU TEST MEMORY LOCATIONS
0741                 866    905 SAVSTK:	DS	2	;TEMPORARY STACK-POINTER STORAGE LOCATION
                     867    906 ;
                     868    907 ;
                     869    908 ;
083a  =              870    909 STACK	EQU	TEMPP+256	;DE-BUG STACK POINTER STORAGE AREA
                     871    910 ;
0743                 872    911 		END

Symbol table

ACII   02db    AIMM   02c0    ANII   02ff    BDOS   0005    BYTEO  01ea 
BYTO1  01fa    BYTO2  01fe    BYTO3  0207    C010   031d    C020   0333 
C030   0349    CCI    0392    CMI    036e    CNCI   0386    CNZI   039e 
CPEI   0362    CPIE   02d8    CPOI   0356    CPU    0241    CPUER  071f 
CPUOK  0731    CZI    03aa    DOSW   0188    DOSW1  0193    IOCHAR 0001*
J010   024c    J020   0252    J030   0258    J040   025e    J050   026d 
J060   0270    J070   0278    J080   0281    J090   0284    J100   028c 
J110   0295    J120   0298    J130   02a0    J140   02a9    J150   02ac 
J160   02b4    J170   02bd    LOLZ   011e    MOVI   03b3    MSG    01d2 
NGCPU  021f    OKCPU  020a    ONCPM  0001    ORII   0309    PCHAR  01dd 
S8080  01b7    SAVSTK 0741    SBII   02f3    STACK  083a    START  0100*
START1 0115    SUII   02e7    SW8080 017b    SWFLAG 019c    SWZ80  0183 
SZ80   019d    TCPI   037a    TEMP0  073c    TEMP1  073d*   TEMP2  073e 
TEMP3  073f    TEMP4  0740    TEMPP  073a    WBOOT  0164    WBOOT1 0178 
XRII   0313    
